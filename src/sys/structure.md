<!-- USAGE NOTES:
- The complex part - actual FloatPrompt creation
- Contains Universal JSON Guide for AI construction
- Technical formatting protocols (biggest AI challenge)
- Custom tool building where variation happens  
- References map.md insights and decide.md extractions
- Content from: structure.md assembly + modes.md Structure Build + types.md patterns + chaining.md orchestration + execution.md construction + Universal JSON Guide
-->

## Structure Build

**AI construction protocols for building custom FloatPrompts through systematic methodology**

> **"Universal structure + Conditional complexity + Infinite expandability = Systematic tool creation"**

*Complete AI guidance for technical FloatPrompt creation with formatting compliance and conversational emergence.*

## üéØ Purpose

Build custom FloatPrompts through systematic three-phase co-creation with universal architecture compliance, technical formatting precision, and conversational sophistication scaling from simple utilities to complex workflow orchestrators.

### üîë Key Principles
- **Universal structure** - 100% predictable top-level architecture
- **Collapsible complexity** - Simple tools minimal, complex tools expanded
- **Infinite expandability** - Any functionality nests within requirements/integration
- **Conversational emergence** - Tools emerge from dialogue, not form-filling

## üö® **MANDATORY EXECUTION PROTOCOL**

**BEFORE YOU BEGIN - READ THIS TWICE:**

1. **STOP** - Do not proceed until you confirm: "I will create this floatprompt in canvas/artifact ONLY"
2. **STOP** - Do not proceed until you confirm: "I will NOT output any floatprompt content in conversation"  
3. **STOP** - Do not proceed until you confirm: "I will use complete JSON structure, not minimal examples"

**IF YOU CANNOT CONFIRM ALL THREE - DO NOT PROCEED WITH FLOATPROMPT CREATION**

## üèóÔ∏è **DEFINITIVE Universal FloatPrompt Architecture**

### **100% UNIVERSAL FIELDS (Every Single FloatPrompt)**

```json
{
  "STOP": "{{EXECUTION_DIRECTIVE}}",
  "meta": {
    "title": "{{TITLE}}",
    "id": "{{ID}}",
    "type": "{{TYPE}}",
    "author": "{{AUTHOR}}",
    "contributors": ["{{CONTRIBUTORS}}"],
    "created": "{{DATE}}",
    "version": "{{VERSION}}",
    "system_version": "floatprompt v0.0.16-alpha",
    "format": "floatprompt",
    "filetype": "fp"
  },
  "human": {
    "intent": "{{PRIMARY_GOAL}}",
    "context": "{{USAGE_CONTEXT}}",
    "constraints": "{{LIMITATIONS}}",
    "preferences": {
      "style": "{{COMMUNICATION_STYLE}}",
      "detail_level": "{{DEPTH_PREFERENCE}}",
      "output_format": "{{EXPECTED_RESULT}}"
    }
  },
  "ai": {
    "model": "{{AI_MODEL}}",
    "role": "{{AI_FUNCTION}}",
    "expertise": "{{DOMAIN_KNOWLEDGE}}",
    "voice_preservation": "{{VOICE_HANDLING_INSTRUCTION}}"
  },
  "requirements": {
    "{{TOOL_SPECIFIC_FUNCTIONALITY}}": "{{DESCRIPTION}}"
  },
  "integration": {
    "{{PIPELINE_COORDINATION}}": "{{DESCRIPTION}}"
  }
}
```

### **HIGHLY RECOMMENDED FIELDS (90-95% of FloatPrompts)**

```json
{
  "execution": {
    "triggers": ["{{ACTIVATION_PATTERNS}}"],
    "success_criteria": "{{OUTCOME_DEFINITION}}"
  },
  "task": {
    "input_type": "{{EXPECTED_INPUT}}",
    "process": "{{TRANSFORMATION_METHOD}}",
    "output_type": "{{EXPECTED_OUTPUT}}"
  },
  "domain": {
    "field": "{{SPECIALIZATION_AREA}}",
    "specialization": "{{SPECIFIC_FOCUS}}",
    "standards": "{{QUALITY_CRITERIA}}"
  },
  "source": {
    "prompt": "{{ORIGIN_PROMPT}}",
    "intent": "{{SOURCE_PURPOSE}}"
  }
}
```

## üéØ **Conditional Field Inclusion Logic**

### **AI Decision Tree for Field Inclusion**

**execution** - Include if:
- User requests executable tool
- Mentions triggers or activation
- Describes workflow or process
- Tool needs success criteria

**task** - Include if:
- Clear input‚Üítransformation‚Üíoutput
- Processing or conversion needed
- Content manipulation required
- Systematic transformation described

**domain** - Include if:
- Specialized field mentioned
- Industry-specific requirements
- Technical standards needed
- Professional expertise required

**source** - Include if:
- Built from existing content
- References prior work
- Iterative improvement
- Adaptation of existing tool

## üéØ **Tool Type Pattern Recognition**

### **Voice-Sensitive Tools (Archaeological)**
```json
{
  "requirements": {
    "archaeological_methodology": "Extract without interpretation, preserve voice patterns",
    "voice_preservation": {
      "extraction_method": "Archaeological precision with zero drift",
      "cognitive_patterns": "Maintain human decision-making fingerprint",
      "temporal_precision": "Preserve hesitations, tildes, discovery markers"
    },
    "output_structure": "Organized intelligence with voice authenticity"
  }
}
```

### **Simple Tools (Content Creation)**
```json
{
  "task": {
    "input_type": "Source content or requirements",
    "process": "Direct transformation or creation methodology", 
    "output_type": "Target format (newsletter, script, thread)"
  },
  "requirements": {
    "core_functionality": "Primary content creation or transformation purpose",
    "quality_standards": "Format and audience requirements"
  }
}
```

### **Workflow Tools (Multi-Stage Coordination)**
```json
{
  "requirements": {
    "orchestration_logic": "Multi-stage process coordination with phase detection",
    "decision_frameworks": "Conditional logic and routing systems",
    "workflow_stages": "Systematic progression through defined phases"
  },
  "integration": {
    "tool_coordination": "Multi-tool workflow management",
    "handoff_protocols": "Context preservation between tools"
  }
}
```

### **Coordination Tools (Reference & Integration)**
```json
{
  "requirements": {
    "reference_material": "Foundational knowledge or voice patterns",
    "integration_protocols": "Cross-tool compatibility specifications"
  },
  "integration": {
    "ecosystem_role": "How this tool supports other FloatPrompts",
    "coordination_features": "Pipeline integration and handoff capabilities"
  }
}
```

## ü§ñ **AI Construction Protocol**

### **When user requests FloatPrompt creation:**

**1. Analyze request complexity:**
- Simple function = minimal JSON structure
- Complex workflow = expanded requirements/integration
- Multi-tool coordination = rich integration section

**2. Determine field inclusion:**
- Always include: STOP, meta, human, ai, requirements, integration
- Conditionally include: execution, task, domain, source based on decision tree

**3. Populate requirements appropriately:**
- Voice-sensitive tools ‚Üí archaeological_methodology, voice_preservation, temporal_precision
- Simple tools ‚Üí core_functionality, quality_standards
- Workflow tools ‚Üí orchestration_logic, workflow_stages, decision_frameworks
- Coordination tools ‚Üí reference_material, integration_protocols

**4. Structure integration based on ecosystem role:**
- Standalone tool ‚Üí minimal coordination notes
- Pipeline component ‚Üí detailed workflow integration
- System utility ‚Üí cross-tool compatibility requirements

**5. Expand complexity only when user request demonstrates need:**
- Don't add workflow management for simple transformations
- Don't include quality gates unless quality assurance mentioned
- Don't add session context unless historical preservation needed

## üìã **Universal Markdown Template**

### **Standard Body Structure**

```markdown
# {{TITLE}}

**{{ONE_LINE_PURPOSE_STATEMENT}}**
*{{EXTENDED_DESCRIPTION}}*

## System Authority
{{CORE_OPERATING_PHILOSOPHY_AND_MISSION}}

## Quick Start
{{IMMEDIATE_ACTION_GUIDANCE}}

## Goals
{{TOOL_PURPOSE_AND_GOALS}}

## Context
{{WHEN_AND_WHY_TO_USE}}

## Output
{{WHAT_YOU_GET}}

## Warnings
{{GENERAL_LIMITATIONS_AND_CONSIDERATIONS}}

**Voice Preservation:**
- {{VOICE_PRESERVATION_WARNING}}
- {{ARCHAEOLOGICAL_METHODOLOGY_CONSTRAINTS}}

<!-- CONDITIONAL SECTIONS START -->

<!-- FOR VOICE-SENSITIVE TOOLS: -->
## Voice Preservation Methodology
{{ARCHAEOLOGICAL_AND_CALIBRATION_APPROACH}}

<!-- FOR WORKFLOW TOOLS: -->
## Automatic Phase Detection
{{PHASE_DETECTION_AND_ROUTING}}

<!-- FOR SIMPLE TOOLS: -->
## Core Methodology
{{PRIMARY_FUNCTION_APPROACH}}

<!-- FOR TOOLS THAT COORDINATE: -->
## Integration Features
{{TOOL_COORDINATION_AND_DEPENDENCIES}}

<!-- CONDITIONAL SECTIONS END -->

**{{COLLABORATION_ATTRIBUTION_LINE}}**

*{{CLOSING_PHILOSOPHICAL_STATEMENT}}*

¬© 2025 [@MDS](https://mds.is) | CC BY 4.0
```

## üõ°Ô∏è **Technical Formatting Requirements**

### **Canvas/Artifact Creation Protocol**
```
<floatprompt
[COMPLETE JSON FRONTMATTER
# [Markdown content following universal template]
</floatprompt>
```

### **Critical Requirements:**
- **Web Browser AI**: Use canvas/artifact with triple backticks
- **Desktop Tools**: Create actual .fp files directly
- **Complete JSON structure** - never minimal examples
- **Template variable replacement** - all {{VARIABLES}} filled
- **Voice preservation compliance** - archaeological methodology

## üìä **Quality Assurance Checklist**

**Before completing FloatPrompt creation:**

- [ ] **Canvas Usage**: Document created in artifact/canvas, not conversation
- [ ] **Complete JSON**: Full frontmatter structure, not minimal example
- [ ] **Field Completeness**: All required fields present and populated
- [ ] **Template Compliance**: Markdown follows universal template structure
- [ ] **Conditional Logic**: Appropriate sections for tool type
- [ ] **Voice Preservation**: Archaeological methodology compliance
- [ ] **Technical Format**: Clean wrapping tags and valid JSON syntax

## üîÑ **Conversational Construction Process**

### **Phase 1: Territory Assessment (from map.md)**
- Apply friction scoring and complexity assessment
- Determine tool type and architectural requirements
- Establish voice preservation needs

### **Phase 2: Extraction Planning (from decide.md)**
- Define archaeological methodology if voice-sensitive
- Identify behavioral requirements and constraints
- Plan integration and coordination needs

### **Phase 3: Systematic Build (structure.md)**
- Apply universal architecture with conditional complexity
- Use appropriate tool type pattern
- Follow technical formatting protocols
- Validate against quality assurance checklist

**Tools emerge naturally from conversation, not form-filling or one-shot generation.**

**AI construction guidance enabling systematic FloatPrompt creation through conversational emergence with technical precision and universal architecture compliance.**
