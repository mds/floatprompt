<floatprompt>
---
{
  "STOP": "Strategic architectural migration mode with foundational priority. Execute FloatPrompt universal architecture implementation with archaeological precision and voice preservation authority. Apply systematic consolidation methodology with Master Rubric validation for reliable system evolution.",
  "meta": {
    "title": "FloatPrompt Universal Architecture Migration - Cursor Implementation",
    "id": "floatprompt-universal-migration-cursor",
    "type": "restructure",
    "author": "@mds",
    "contributors": ["@mds", "Claude Sonnet 4"],
    "created": "2025-01-22",
    "version": "1.0.0",
    "system_version": "floatprompt v0.0.16-alpha",
    "format": "floatprompt",
    "filetype": "fp"
  },
  "human": {
    "intent": "Implement universal FloatPrompt architecture through systematic 16-file to 6-file consolidation using Cursor development environment with complete functionality preservation and architectural consistency",
    "context": "Tool Factory paradigm implementation with universal JSON + Markdown templates, eliminating Core/Pro complexity while enabling conversational sophistication scaling",
    "constraints": "Must preserve all existing functionality, maintain archaeological voice preservation, ensure existing tool compatibility, and follow Master Rubric validation protocols",
    "preferences": {
      "style": "systematic migration specification with archaeological precision and comprehensive validation requirements",
      "detail_level": "complete implementation guidance with step-by-step consolidation mapping and quality assurance protocols",
      "output_format": "production-ready migration instructions with validation checkpoints and rollback procedures"
    }
  },
  "ai": {
    "model": "Claude Sonnet 4",
    "role": "System architecture migration specialist providing systematic consolidation guidance with archaeological precision and universal template compliance",
    "expertise": "floatprompt architecture evolution, universal template implementation, build system integration, and change management protocols",
    "voice_preservation": "First, do not rewrite. Preserve phrasing, rhythm, and tone unless explicitly told otherwise. Archaeological extraction without interpretation."
  },
  "execution": {
    "triggers": ["floatprompt migration", "universal architecture implementation", "cursor rearchitecture", "systematic consolidation"],
    "success_criteria": "unified floatprompt.fp with universal architecture compliance, 73% complexity reduction, all functionality preserved, existing tool compatibility maintained"
  },
  "task": {
    "input_type": "current 16-file FloatPrompt compilation system with scattered behavioral specifications and linear organization",
    "process": "systematic consolidation using universal templates with Master Rubric validation and archaeological preservation protocols",
    "output_type": "unified 6-file MDS structure with universal JSON + Markdown compliance and complete functionality preservation"
  },
  "domain": {
    "field": "system architecture migration and universal template implementation",
    "specialization": "FloatPrompt ecosystem evolution with Tool Factory paradigm and conversational complexity scaling",
    "standards": "universal architecture compliance + archaeological preservation + Master Rubric validation + build system integration + existing tool compatibility"
  },
  "source": {
    "prompt": "comprehensive architectural analysis identifying universal template superiority and systematic consolidation pathway for FloatPrompt ecosystem evolution",
    "intent": "implement Tool Factory paradigm through universal architecture enabling conversational sophistication without file complexity proliferation"
  },
  "requirements": {
    "architectural_migration": {
      "universal_template_compliance": "All consolidated content must follow universal JSON + Markdown structure with appropriate conditional complexity",
      "mds_method_embodiment": "File structure directly implements Map Territory → Decide Extractions → Structure Build methodology",
      "tool_factory_paradigm": "Single unified system enabling conversational sophistication scaling from simple to archaeological precision",
      "functionality_preservation": "100% of current behavioral specifications and capabilities maintained through systematic consolidation"
    },
    "consolidation_specification": {
      "file_structure_transformation": {
        "current_16_files": "header.md + boot.md + body.md + config.md + execution.md + voice.md + types.md + modes.md + chaining.md + structure.md + discovery.md + validation.md + enforcement.md + naming.md + metadata.md + footer.md",
        "target_6_files": "header.md + boot.md + map.md + decide.md + structure.md + footer.md",
        "complexity_reduction": "73% file reduction while preserving all essential functionality"
      },
      "content_mapping_strategy": {
        "map_md": "config.md friction scoring + modes.md Map Territory + execution.md territory protocols + chaining.md territory assessment",
        "decide_md": "voice.md complete methodology + modes.md Decide Extractions + config.md behavioral requirements + archaeological extraction protocols",
        "structure_md": "structure.md assembly + modes.md Structure Build + types.md patterns + chaining.md orchestration + execution.md construction"
      },
      "elimination_strategy": {
        "body_md": "Universal template handles structure organization",
        "discovery_md": "Eliminate per YAGNI principles - over-engineering",
        "naming_md": "Eliminate - embed essential conventions only",
        "validation_md": "Essential parts to Quality Standards section",
        "enforcement_md": "Goal hierarchy to System Authority, rest eliminated",
        "metadata_md": "Format requirements to Quality Standards section"
      }
    },
    "archaeological_preservation": {
      "voice_fidelity_maintenance": "Archaeological extraction methodology preserved exactly in decide.md with zero interpretation protocols",
      "behavioral_specification_integrity": "All current behavioral requirements consolidated with enhanced organization and zero capability loss",
      "conversational_complexity_scaling": "Archaeological precision activated through natural conversation cues without structural mode switching",
      "recognition_before_action": "Core principle preserved ensuring human recognition verification before AI execution"
    },
    "validation_requirements": {
      "master_rubric_compliance": "Apply systematic evaluation for each consolidation decision with documented rationale and impact assessment",
      "existing_tool_compatibility": "Validate Design Decision Extractor, Newsletter Writer, Script Writer, Thread Writer, and all specialized tools maintain functionality",
      "cross_platform_verification": "Test unified floatprompt.fp functionality across Claude, ChatGPT, Cursor, and other AI systems",
      "build_system_integration": "Ensure build.mjs compilation process maintains injection systems and template variable functionality"
    }
  },
  "integration": {
    "cursor_environment_optimization": {
      "branch_workflow": "git checkout -b floatprompt-universal-architecture for safe experimentation with rollback capability",
      "file_organization": "Preserve original 16 files in _archive/ while building new 6-file structure for comparison and validation",
      "incremental_testing": "Systematic validation checkpoints after each major consolidation with existing tool compatibility verification",
      "git_commit_strategy": "Incremental commits following Master Rubric validation with clear decision documentation"
    },
    "build_system_coordination": {
      "build_mjs_updates": "Update component array from 16-file compilation to 6-file MDS progression with phase organization",
      "injection_preservation": "Maintain shared component injection system and template variable population for cross-file dependency management",
      "compilation_workflow": "Preserve header.md → body content → footer.md structure while implementing universal template organization",
      "output_compatibility": "Ensure floatprompt.fp.txt output maintains universal architecture compliance and cross-platform portability"
    },
    "ecosystem_compatibility": {
      "universal_template_inheritance": "All existing specialized tools inherit universal architecture benefits without requiring updates",
      "voice_guide_coordination": "Archaeological extraction protocols maintain compatibility with existing voice preservation tools",
      "pipeline_workflow_preservation": "Multi-tool coordination capabilities enhanced through systematic Integration Features organization"
    }
  }
}
---

# 🏗️ FloatPrompt Universal Architecture Migration - Cursor Implementation

**Systematic 16-file to 6-file consolidation implementing Tool Factory paradigm with archaeological precision**

> **"Universal structure + Conditional complexity + Infinite expandability = Systematic tool creation"**

*Complete migration specification for implementing universal FloatPrompt architecture through Cursor development environment with Master Rubric validation and archaeological preservation.*

---

## 🎯 System Authority

I provide systematic guidance for migrating FloatPrompt from 16-file compilation complexity to unified 6-file MDS structure implementing the Tool Factory paradigm with universal template compliance and archaeological voice preservation.

**Operating Principle**: "Systematic consolidation with archaeological precision enables architectural evolution while preserving complete functionality and enhancing information organization."

**Core Mission**: Transform scattered behavioral specifications into logical MDS progression while maintaining 100% capability preservation and implementing universal template consistency.

---

## ⚡ Migration Overview

### 🎯 **Architectural Transformation**
**Current State**: 16-file linear compilation with scattered behavioral specifications
**Target State**: 6-file MDS structure with universal template compliance and logical information architecture

### 📊 **Impact Assessment**
- **73% file complexity reduction** while preserving all functionality
- **Universal template compliance** enabling ecosystem consistency
- **Tool Factory paradigm** implementation through conversational sophistication scaling
- **Archaeological preservation** of all voice and behavioral specifications

### 🔧 **Implementation Strategy**
**Systematic consolidation** using Master Rubric validation with incremental testing and existing tool compatibility verification at each checkpoint.

---

## 📋 Systematic Consolidation Methodology

### **Phase 1: Cursor Environment Setup**

#### **Branch Creation and Safety Protocols**
```bash
# Create migration branch for safe experimentation
git checkout -b floatprompt-universal-architecture

# Verify foundation files are accessible
ls _floatprompt-restructuring-map.md
ls _master-floatprompt-rubric.md  
ls core_floatprompt_json.json
ls universal_markdown_template.txt
```

#### **File Organization Strategy**
```
floatprompt/
├── _archive/                           # Preserve original system
│   └── [16 original component files]   # Complete backup for rollback
├── src/sys/                            # New 6-file structure
│   ├── header.md                       # Infrastructure (preserved)
│   ├── boot.md                         # Infrastructure (preserved)
│   ├── map.md                          # NEW: Map Territory methodology
│   ├── decide.md                       # NEW: Decide Extractions methodology
│   ├── structure.md                    # NEW: Structure Build methodology
│   └── footer.md                       # Infrastructure (preserved)
├── floatprompt-unified.fp              # Generated unified output
└── validation-results.md               # Master Rubric documentation
```

### **Phase 2: Content Consolidation Mapping**

#### **map.md Content Sources**
**Master Rubric Assessment**:
- **Component**: Territory assessment methodology consolidation
- **Change Type**: Consolidate to Map Territory
- **Rationale**: Logical organization of friction scoring and territorial analysis
- **Impact**: Enhanced information architecture with natural MDS progression

**Content Allocation**:
- `config.md` → **Friction assessment pipeline** (building/hallway/small room metaphors)
- `modes.md` → **Map Territory mode specifications** (complete territorial methodology)
- `execution.md` → **Territory assessment protocols** (mapping execution logic)
- `chaining.md` → **Territory mapping workflows** (spawning and coordination)

#### **decide.md Content Sources**
**Master Rubric Assessment**:
- **Component**: Archaeological extraction and voice preservation consolidation
- **Change Type**: Consolidate to Decide Extractions
- **Rationale**: Voice preservation belongs in extraction phase per architectural analysis
- **Impact**: Logical organization of all voice and behavioral specifications

**Content Allocation**:
- `voice.md` → **Complete voice preservation methodology** (archaeological extraction protocols)
- `modes.md` → **Decide Extractions mode specifications** (extraction behavioral patterns)
- `config.md` → **Behavioral requirements** (strategic consultation, progressive disclosure)
- **NEW** → **Conversational complexity scaling** (archaeological precision activation)

#### **structure.md Content Sources**
**Master Rubric Assessment**:
- **Component**: Assembly and building methodology consolidation
- **Change Type**: Consolidate to Structure Build
- **Rationale**: Systematic organization of construction and orchestration protocols
- **Impact**: Enhanced assembly capabilities with workflow coordination

**Content Allocation**:
- `structure.md` → **Assembly protocols** (systematic building methodology)
- `modes.md` → **Structure Build mode specifications** (construction behavioral patterns)
- `types.md` → **Tool type patterns** (universal template applications)
- `chaining.md` → **Workflow orchestration** (multi-tool coordination)
- `execution.md` → **Construction protocols** (tool creation workflows)

### **Phase 3: Universal Template Implementation**

#### **JSON Frontmatter Structure**
Using `core_floatprompt_json.json` as foundation:

```json
{
  "STOP": "FloatPrompt Operating System core infrastructure mode...",
  "meta": {
    "title": "FloatPrompt Operating System",
    "id": "floatprompt-os",
    "type": "template",
    "author": "@mds",
    "contributors": ["@mds", "Claude Sonnet 4", "FloatPrompt Build System"],
    "created": "2025-01-22",
    "version": "0.0.16-alpha",
    "system_version": "floatprompt v0.0.16-alpha",
    "format": "floatprompt",
    "filetype": "fp"
  },
  "requirements": {
    "core_operating_system": {
      /* Complete MDS methodology from consolidated files */
    },
    "behavioral_requirements": {
      /* Strategic consultation and execution precision */
    },
    "archaeological_extraction": {
      /* Voice preservation methodology */
    }
  },
  "integration": {
    "ecosystem_coordination": {
      /* Cross-tool compatibility and pipeline workflows */
    }
  }
}
```

#### **Markdown Body Structure**
Using `universal_markdown_template.txt` pattern:

```markdown
# 🎯 FloatPrompt Operating System
**Portable AI collaboration infrastructure with voice preservation**

## 🎯 System Authority
[Goal hierarchy from enforcement.md + operating principles]

## ⚡ Quick Start Options
[Simplified from boot.md]

## 🗺️ Map Territory
[Complete methodology from map.md consolidation]

## 🏺 Decide Extractions  
[Complete methodology from decide.md consolidation]

## 🏗️ Structure Build
[Complete methodology from structure.md consolidation]

## 🔗 Integration Features
[Cross-tool coordination capabilities]

## 📝 Getting Started
[Simplified onboarding workflow]

## 🛡️ Quality Standards
[Essential validation + format requirements]
```

### **Phase 4: Build System Integration**

#### **build.mjs Configuration Update**
```javascript
// UPDATED: 6-file MDS structure
const BUILD_CONFIG = {
  sourceDir: './src/sys',
  outputDir: './dist',
  outputFile: `floatprompt.fp.txt`,
  
  components: [
    // Phase 1: Infrastructure
    { file: 'header.md', type: 'markdown', phase: 'Infrastructure' },
    { file: 'boot.md', type: 'markdown', phase: 'Infrastructure' },
    
    // Phase 2: MDS Method (Core Functionality)
    { file: 'map.md', type: 'markdown', phase: 'Territory' },
    { file: 'decide.md', type: 'markdown', phase: 'Extraction' },
    { file: 'structure.md', type: 'markdown', phase: 'Assembly' },
    
    // Phase 3: Foundation
    { file: 'footer.md', type: 'markdown', phase: 'Infrastructure' }
  ]
};
```

#### **Injection System Preservation**
- **Maintain** `injectSharedComponents()` functionality for cross-file dependencies
- **Preserve** template variable population system for dynamic content
- **Ensure** JSON frontmatter injection continues to work with shared components

---

## 🛡️ Master Rubric Validation Protocol

### **Systematic Change Assessment**

#### **For Each Consolidation Decision**:
1. **Component**: Which source files → which target file
2. **Change Type**: "Consolidate to Map/Decide/Structure"
3. **Rationale**: Logical organization justification with architectural analysis
4. **Impact Assessment**: Functionality preservation and information architecture improvement
5. **Linkage Score**: Cross-component dependency analysis (0-3 scale)
6. **Risk Level**: Potential for system disruption assessment
7. **Validation Protocol**: Testing requirements before implementation

#### **Example Rubric Application**:
```markdown
**Component**: voice.md → decide.md consolidation
**Change Type**: Consolidate to Decide Extractions
**Rationale**: Voice preservation belongs in extraction phase per MDS methodology
**Impact Assessment**: Enhanced logical organization, improved archaeological extraction
**Linkage Score**: 2 (affects extraction tools, archaeological mode protocols)
**Risk Level**: Medium (behavioral specification changes require validation)
**Validation Protocol**: Test voice preservation with Design Decision Extractor
**Resolution Status**: Approved with archaeological enhancement requirements
```

### **Mandatory Validation Questions**

**For Every Consolidation**:
1. What would break if this change is implemented?
2. What other components depend on this functionality?  
3. Can we achieve the goal through linking/referencing instead?
4. Will STOP behavior still work across Claude, ChatGPT, Cursor?
5. How does this align with the three-goal hierarchy?

---

## 🧪 Testing and Validation Requirements

### **Existing Tool Compatibility Testing**

#### **Required Tool Validation**:
- **Design Decision Extractor** → Verify archaeological extraction functionality
- **Newsletter Writer** → Confirm voice coordination and content pipeline
- **Script Writer** → Validate workflow orchestration and viral content optimization  
- **Thread Writer** → Test integration features and content protection
- **Voice Foundation Tools** → Ensure voice guide compatibility maintained

#### **Cross-Platform Validation**:
- **Claude** → Upload unified floatprompt.fp and verify behavioral consistency
- **ChatGPT** → Test universal template compatibility and voice preservation
- **Cursor** → Validate development environment integration and file operations
- **Additional AI Systems** → Confirm portable intelligence functionality

### **Build System Validation**

#### **Compilation Testing**:
- **Template Variable Population** → Verify {{VARIABLES}} replacement functionality
- **Shared Component Injection** → Test JSON and YAML injection systems
- **Output Format Compliance** → Ensure universal template structure maintained
- **File Size Optimization** → Confirm AI ingestion budget compliance (~80KB target)

#### **Quality Assurance Checklist**:
- [ ] All original behavioral specifications preserved
- [ ] Universal template structure implemented correctly
- [ ] Archaeological extraction protocols functional
- [ ] Cross-tool integration capabilities maintained
- [ ] Build system compilation successful
- [ ] Existing tool compatibility verified
- [ ] Cross-platform functionality tested

---

## 🔄 Implementation Workflow

### **Step-by-Step Execution**

#### **1. Foundation Setup** (Day 1)
- Create migration branch with safety protocols
- Import foundation files and establish file organization
- Archive original 16-file system for rollback capability

#### **2. Content Consolidation** (Day 2-3)
- Apply Master Rubric to systematic content mapping
- Create map.md with territorial assessment methodology
- Build decide.md with archaeological extraction protocols
- Construct structure.md with assembly and orchestration systems

#### **3. Universal Template Integration** (Day 4)
- Implement JSON frontmatter using core_floatprompt_json.json
- Apply markdown structure following universal_markdown_template.txt
- Ensure conditional complexity and requirements organization

#### **4. Build System Update** (Day 5)
- Update build.mjs component configuration for 6-file structure
- Test compilation process with injection system preservation
- Validate output format and universal template compliance

#### **5. Comprehensive Testing** (Day 6-7)
- Execute existing tool compatibility validation protocol
- Perform cross-platform functionality verification
- Apply final Master Rubric assessment and documentation

### **Validation Checkpoints**

#### **After Each Major Phase**:
- **Functionality Preservation Test** → All capabilities maintained
- **Architectural Consistency Check** → Universal template compliance
- **Existing Tool Compatibility** → Specialized tools remain functional
- **Cross-Platform Verification** → Consistent behavior across AI systems

---

## 📊 Success Criteria and Outcomes

### **Architectural Goals Achieved**
- ✅ **73% file complexity reduction** while preserving all functionality
- ✅ **Universal template compliance** enabling ecosystem consistency  
- ✅ **Tool Factory paradigm** implementation through single unified system
- ✅ **MDS methodology embodiment** through natural file structure progression
- ✅ **Archaeological preservation** of voice and behavioral specifications

### **Quality Assurance Validation**
- ✅ **Master Rubric compliance** for all consolidation decisions
- ✅ **Existing tool compatibility** maintained across all specialized floatprompts
- ✅ **Cross-platform functionality** verified for Claude, ChatGPT, Cursor
- ✅ **Build system integration** successful with injection preservation
- ✅ **Universal architecture** consistency throughout ecosystem

### **System Health Indicators**
- ✅ **AI ingestion optimization** through organized information architecture
- ✅ **Human navigation improvement** via logical MDS progression
- ✅ **Maintenance simplification** through consolidated behavioral specifications  
- ✅ **Ecosystem coherence** enhanced through universal template consistency

---

## 🚨 Risk Mitigation and Rollback Procedures

### **Safety Protocols**
- **Complete backup** of original 16-file system in _archive/ directory
- **Incremental commits** with Master Rubric validation documentation
- **Rollback capability** at any validation checkpoint if issues detected
- **Parallel testing** maintaining original system until migration verified

### **Emergency Procedures**
If any validation fails:
1. **Immediate rollback** to previous validated state
2. **Issue analysis** using Master Rubric failure criteria
3. **Remediation planning** with specific correction requirements
4. **Re-testing protocol** before proceeding with modified approach

---

## 🎯 Post-Implementation Monitoring

### **System Health Tracking**
- **File size optimization** monitoring for AI ingestion efficiency
- **Cross-platform consistency** verification across ongoing usage
- **Existing tool functionality** continuous compatibility confirmation
- **User experience improvement** measurement through simplified navigation

### **Ecosystem Evolution**
- **Universal template benefits** propagation to new tool creation
- **Tool Factory paradigm** effectiveness for conversational sophistication
- **Archaeological extraction** quality maintenance across voice-sensitive workflows
- **Build system efficiency** optimization opportunities identification

---

**This migration specification enables systematic transition to universal FloatPrompt architecture while preserving complete functionality and implementing Tool Factory paradigm through archaeological precision and Master Rubric validation.**

*Systematic consolidation serves architectural evolution through reliable migration protocols, enabling enhanced information organization without functionality compromise.*

---
© 2025 [@MDS](https://mds.is) | CC BY 4.0
</floatprompt>