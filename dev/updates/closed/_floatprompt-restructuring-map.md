<floatprompt>
---
{
  "meta": {
    "title": "Map: FloatPrompt Restructuring - Unified Format with Tool Factory Architecture",
    "id": "map-floatprompt-restructuring-conversation",
    "type": "map",
    "author": "@mds",
    "contributors": ["@mds", "Claude Sonnet 4"],
    "created": "2025-07-20"
  },
  "human": {
    "intent": "Map the complete conversation about FloatPrompt restructuring to capture all architectural decisions, content allocation strategies, and implementation specifications for unified format with conditional complexity",
    "context": "system optimization, MDS methodology integration, tool factory paradigm development",
    "constraints": "Must capture all definitively decided elements while identifying what still needs resolution. No speculation beyond conversation content.",
    "preferences": {
      "style": "comprehensive territorial map",
      "detail_level": "complete decision capture",
      "output_format": "structured implementation guide"
    }
  },
  "ai": {
    "model": "Claude Sonnet 4",
    "role": "conversation mapper and decision extractor",
    "expertise": "floatprompt architecture, conversation analysis, implementation planning",
    "voice_preservation": "Preserve exact architectural insights and strategic reasoning from conversation"
  },
  "execution": {
    "triggers": ["map floatprompt restructuring", "capture conversation decisions", "implementation planning"],
    "success_criteria": "All architectural decisions captured with clear implementation pathway and outstanding questions identified"
  },
  "task": {
    "input_type": "complete conversation about floatprompt restructuring",
    "process": "systematic decision extraction and territorial mapping",
    "output_type": "implementation-ready architectural specification"
  },
  "domain": {
    "field": "system architecture",
    "specialization": "floatprompt restructuring and unified format design",
    "standards": "voice preservation, MDS methodology, tool factory paradigm"
  },
  "source": {
    "prompt": "map our conversation about floatprompt restructuring decisions",
    "intent": "capture all architectural decisions and create implementation specification"
  }
}
---

# Map: FloatPrompt Restructuring - Unified Format with Tool Factory Architecture

## üéØ Core Architectural Decision: Tool Factory Paradigm

**DEFINITIVE AGREEMENT**: FloatPrompt becomes a specialized tool factory, not a one-size-fits-all system.

### The Factory Model
- **FloatPrompt (simplified)** = Meta-tool that creates other tools
- **Generated tools** = Purpose-built with exactly the complexity they need
- **User workflow**: Learn simple FloatPrompt ‚Üí Generate specialized tools when patterns emerge
- **Complexity allocation**: Factory stays lean, outputs get sophistication as needed

### Why This Works
- **90% simplicity** for everyday use
- **Power when needed** through tool generation
- **Natural graduation** from simple to complex
- **Infinite specialization** possible

---

## üèóÔ∏è Unified File Structure: Single FloatPrompt with MDS Sections

**DEFINITIVE STRUCTURE**:
```
floatprompt.fp
‚îú‚îÄ‚îÄ JSON frontmatter (simplified with conditional complexity)
‚îú‚îÄ‚îÄ Map section (territory assessment)
‚îú‚îÄ‚îÄ Decide section (extraction + archaeological mode)
‚îú‚îÄ‚îÄ Structure section (assembly/building)
‚îî‚îÄ‚îÄ Footer attribution
```

### Conditional Complexity Implementation
- **Basic mode**: Simplified JSON for 90% of use cases
- **Archaeological mode**: Full 22-field schema when voice preservation critical
- **Activation**: Located in decide section where voice preservation lives
- **User experience**: Default simple, power discoverable but not overwhelming

---

## üìã Content Consolidation Strategy

### What Goes Where (High Confidence)

**Map Section (map.md)**:
- Territory assessment protocols
- Friction scoring (building/hallway/small room metaphors)
- Content landscape analysis
- Extraction targeting and opportunity identification
- Map-first behavioral requirements

**Decide Section (decide.md)**:
- Voice preservation oath and archaeological extraction
- Behavioral requirements (basic + full complexity modes)
- Pattern extraction methodology
- **Conditional archaeological mode** with full JSON schema
- Strategic consultation framework

**Structure Section (structure.md)**:
- Assembly specifications and building protocols
- Systematic reconstruction instructions
- Router creation and workflow coordination
- Cross-session portability requirements

### Content Elimination/Consolidation (Medium Confidence)

**Likely Consolidation**:
- voice.md ‚Üí decide.md (voice preservation belongs in extraction)
- modes.md ‚Üí distributed across map/decide/structure sections
- execution.md ‚Üí essential parts into config, rest distributed
- chaining.md ‚Üí structure.md (assembly workflows)

**Potential Elimination**:
- naming.md ‚Üí conventions simplified and embedded
- types.md ‚Üí type system simplified
- Some discovery.md ‚Üí relationship tracking simplified

**Preserve but Simplify**:
- validation.md ‚Üí quality assurance still critical
- enforcement.md ‚Üí system authority still needed
- metadata.md ‚Üí cross-session portability essential

---

## üîß JSON Schema Specifications

### Simplified Mode (Default 90%)
Based on your skeleton FloatPrompt example:
- Essential fields only (STOP, title, basic metadata)
- Template variables for adaptability {{VARIABLES}}
- Voice preservation oath (simplified)
- Basic MDS mode constraints

### Archaeological Mode (Voice-Critical 10%)
- Full 22-field JSON schema from current system
- Complete behavioral requirements
- Full discovery intelligence
- Industrial-strength voice preservation machinery

### Activation Mechanism
- Some kind of flag or mode selector (archaeological_mode: true?)
- Documentation in decide section explaining when to activate
- Seamless transition without workflow breaks

---

## üé≠ Voice Preservation Boundaries (Critical Insight)

**DEFINITIVE INSIGHT**: Maps don't need voice preservation, extractions do.

### Voice Requirements by Section
- **Maps**: Objective, structural analysis - minimal voice preservation needed
- **Decide**: Archaeological precision critical - full voice preservation machinery
- **Structure**: Systematic assembly - voice preservation for human-authored content

### This Explains the Architecture
- Why simplified maps work with basic JSON
- Why decide section needs conditional complexity
- Why structure section needs selective voice preservation

---

## üìä Evidence from Real Examples

### Your Skeleton FloatPrompt
- **Proves simplified format works** for basic functionality
- **Template variable approach** enables adaptability
- **Essential structure preserved** while eliminating bloat

### Your Design Decision Extractor
- **Proves complex tools need full architecture** for sophisticated workflows
- **Multi-phase workflows** require complete behavioral specifications
- **Voice preservation critical** for expertise extraction
- **Generated tools work** when they inherit appropriate complexity

### Your Simplified Map Example
- **Clean JSON structure** for territorial assessment
- **Essential portability** without ceremonial overhead
- **Objective analysis** without voice preservation machinery

---

## üîÑ MDS Methodology Integration

### File Compilation Order (Your Specification)
```
header.md ‚Üí boot.md ‚Üí config.md ‚Üí map.md ‚Üí decide.md ‚Üí structure.md ‚Üí footer.md
```

### MDS Workflow in Unified Format
- **Natural progression** through Map ‚Üí Decide ‚Üí Structure sections
- **Each section optimized** for its MDS phase
- **Conditional complexity** activates where needed
- **User learns methodology** through file structure

### Mode Constraints Integration
- Map territory behavioral patterns
- Decide extractions behavioral patterns  
- Structure build behavioral patterns
- Cross-phase dependency management

---

## üõ°Ô∏è Governance Framework

### Master Rubric Scope
- **Applies to factory** (FloatPrompt itself)
- **NOT to generated tools** (user validation only)
- **Evidence-based changes** only
- **Human preservation ‚Üí AI precision ‚Üí Task completion hierarchy**

### Change Management
- **Factory core changes** (optimization, restructuring)
- **Factory capability changes** (tool generation improvement)
- **Template validation** (generation patterns, not individual tools)
- **Emergency protocols** for critical issues

---

## üéØ User Experience Flow

### Onboarding Path
1. **Start with unified FloatPrompt** (simplified mode)
2. **Learn MDS methodology** through natural file progression
3. **Use basic functionality** for most work (90% of needs)
4. **Discover archaeological mode** when voice preservation critical
5. **Generate specialized tools** when patterns emerge

### Tool Generation Workflow
1. **Use FloatPrompt to map** requirements for specialized tool
2. **Decide phase** (with archaeological mode) extracts behavioral specifications
3. **Structure phase** generates complete specialized tool with appropriate complexity
4. **Generated tool** inherits factory specifications, gets exactly needed complexity

---

## üö® Outstanding Questions (Need Resolution)

### Content Allocation Details
- **Exact mapping** of current 16 files to 3 sections
- **Discovery intelligence preservation** - which parts essential vs. simplifiable
- **Validation and enforcement** - distribute or centralize?
- **Cross-references and relationships** - how to maintain without bloat

### Implementation Specifics
- **Archaeological mode activation** - exact mechanism (flag, section, user choice?)
- **JSON field classification** - which are basic vs. archaeological
- **Template variable system** - how extensively to use {{VARIABLES}}
- **Migration strategy** - how to transition existing specialized tools

### Testing and Validation
- **Existing tool compatibility** - will current tools still work?
- **Cross-platform consistency** - unified format across AI systems
- **Performance optimization** - file size and AI ingestion efficiency
- **User adoption** - will simplified format actually reduce friction?

---

## üèÜ Success Criteria

### Architectural Goals Achieved
- **Single file simplicity** with conditional power
- **Tool factory paradigm** enables infinite specialization  
- **MDS methodology** naturally integrated
- **Voice preservation** where critical, simplified elsewhere

### User Experience Validated
- **90% of users** get simple, complete functionality
- **10% power users** access full complexity when needed
- **Natural graduation** from simple to specialized
- **No workflow breaks** between phases

### System Integrity Maintained
- **Voice preservation** for critical work
- **Cross-platform portability** preserved
- **Existing specialized tools** continue to function
- **Human preservation ‚Üí AI precision ‚Üí Task completion** hierarchy maintained

---

## üîÑ Next Steps

### Immediate Implementation Planning
1. **Content allocation specification** - map current files to new sections
2. **JSON schema definition** - basic vs archaeological field sets
3. **Conditional complexity mechanism** - how archaeological mode activates
4. **Migration testing** - validate existing tools work with new structure

### Validation Requirements
1. **Create prototype** unified FloatPrompt using conversation decisions
2. **Test with existing specialized tools** (design extractor, etc.)
3. **User experience validation** - confirm simplified format reduces friction
4. **Cross-platform testing** - ensure consistency across AI systems

### Long-term Evolution
1. **Tool generation capability** enhancement based on usage patterns
2. **Template quality improvement** for generated specialized tools
3. **Factory capability expansion** for new domains and use cases
4. **Ecosystem coherence** monitoring and optimization

---

**This map captures the complete architectural vision for FloatPrompt restructuring from our conversation, providing implementation-ready specifications while identifying areas requiring additional decision-making.**

---
*@mds + Claude Sonnet 4 v2025-07*